# üéØ CORE FUNCTIONALITY –ê–ù–ê–õ–ò–ó APP/SERVICES/VOICE

**üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 27 –∏—é–ª—è 2025  
**üéØ –¶–µ–ª—å**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è voice_v2  
**üìÅ –°–∏—Å—Ç–µ–º–∞**: `app/services/voice/` - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ core capabilities

---

## üîß **STT –ü–†–û–í–ê–ô–î–ï–†–´ (SPEECH-TO-TEXT)**

### **1. OpenAI STT (Whisper) - 313 —Å—Ç—Ä–æ–∫**
**API**: OpenAI Whisper API (whisper-1)
**Credentials**: OPENAI_API_KEY
**–§–æ—Ä–º–∞—Ç—ã**: mp3, mp4, m4a, wav, flac, ogg, opus, webm
**–õ–∏–º–∏—Ç—ã**: 25MB –Ω–∞ —Ñ–∞–π–ª
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –í—ã—Å–æ—á–∞–π—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–∏—Ö —è–∑—ã–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
- –í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å API –≤—ã–∑–æ–≤–æ–≤

### **2. Google STT (Cloud Speech-to-Text) - 296 —Å—Ç—Ä–æ–∫**
**API**: Google Cloud Speech-to-Text v1  
**Credentials**: GOOGLE_APPLICATION_CREDENTIALS + GOOGLE_CLOUD_PROJECT_ID
**–§–æ—Ä–º–∞—Ç—ã**: mp3, wav, flac, ogg, opus, amr, amr-wb, webm
**–õ–∏–º–∏—Ç—ã**: 10MB —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π (latest_long, latest_short, command_and_search)
- –ü–æ—Ç–æ–∫–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Å–ª–æ–≤

### **3. Yandex STT (SpeechKit) - 428 —Å—Ç—Ä–æ–∫**
**API**: Yandex SpeechKit v1
**Credentials**: YANDEX_API_KEY + YANDEX_FOLDER_ID
**–§–æ—Ä–º–∞—Ç—ã**: wav, ogg, mp3
**–õ–∏–º–∏—Ç—ã**: 1MB –Ω–∞ –∑–∞–ø—Ä–æ—Å
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- –ù–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π (general, general:rc)
- API Key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ù–ï IAM Token)
- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

---

## üó£Ô∏è **TTS –ü–†–û–í–ê–ô–î–ï–†–´ (TEXT-TO-SPEECH)**

### **1. OpenAI TTS - 367 —Å—Ç—Ä–æ–∫**
**API**: OpenAI TTS API (tts-1, tts-1-hd)
**–ì–æ–ª–æ—Å–∞**: alloy, echo, fable, onyx, nova, shimmer
**–§–æ—Ä–º–∞—Ç—ã**: mp3, opus, aac, flac
**–õ–∏–º–∏—Ç—ã**: 4096 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–æ–ª–æ—Å–∞
- –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤

### **2. Google TTS (Cloud Text-to-Speech) - 294 —Å—Ç—Ä–æ–∫–∏**
**API**: Google Cloud Text-to-Speech v1
**–ì–æ–ª–æ—Å–∞**: Standard, WaveNet, Neural2, Journey, Studio
**–§–æ—Ä–º–∞—Ç—ã**: mp3, wav, ogg
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ Neural voices
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —è–∑—ã–∫–æ–≤ –∏ –≥–æ–ª–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ç–µ–º–±—Ä–∞
- SSML –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### **3. Yandex TTS (SpeechKit) - 419 —Å—Ç—Ä–æ–∫**
**API**: Yandex SpeechKit TTS v1
**–ì–æ–ª–æ—Å–∞**: jane, oksana, zahar, ermil, omazh
**–§–æ—Ä–º–∞—Ç—ã**: wav, mp3, opus
**–õ–∏–º–∏—Ç—ã**: 1000 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –°–∞–º—ã–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä—É—Å—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞
- –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–∫—Ä–∞—à–µ–Ω–Ω–æ—Å—Ç—å
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏
- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã

---

## üéõÔ∏è **–û–°–ù–û–í–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ê–†–•–ò–¢–ï–ö–¢–£–†–´**

### **1. VoiceServiceOrchestrator (932 —Å—Ç—Ä–æ–∫–∏) - –ì–õ–ê–í–ù–´–ô –ö–û–û–†–î–ò–ù–ê–¢–û–†**

#### **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
- `initialize()` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `initialize_voice_services_for_agent()` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- `process_voice_message()` - –û–±—Ä–∞–±–æ—Ç–∫–∞ STT
- `generate_speech_response()` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è TTS
- `cleanup()` - –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

#### **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**:
```python
# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
STT_PRIORITY: OpenAI ‚Üí Google ‚Üí Yandex
TTS_PRIORITY: OpenAI ‚Üí Google ‚Üí Yandex

# –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
2. –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
3. –ü–æ–≤—Ç–æ—Ä –æ–ø–µ—Ä–∞—Ü–∏–∏
4. –ü—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –≤—Å–µ—Ö - –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏
```

#### **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Redis**:
- **STT Cache**: `stt_cache:{file_hash}` (TTL 24h)
- **TTS Cache**: `tts_cache:{text_hash}` (TTL 24h)
- **Provider Status**: `provider_status:{provider}` (TTL 5min)

### **2. MinioFileManager (425 —Å—Ç—Ä–æ–∫) - –§–ê–ô–õ–û–í–û–ï –•–†–ê–ù–ò–õ–ò–©–ï**

#### **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- –ó–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ –≤ MinIO
- Presigned URLs —Å TTL
- –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- Health check MinIO connectivity

#### **Bucket structure**:
```
voice-files/
‚îú‚îÄ‚îÄ agents/{agent_id}/
‚îÇ   ‚îú‚îÄ‚îÄ stt/{user_id}/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ {timestamp}_{file_id}.{ext}
‚îÇ   ‚îî‚îÄ‚îÄ tts/{user_id}/
‚îÇ       ‚îî‚îÄ‚îÄ {timestamp}_{response_id}.{ext}
```

### **3. VoiceIntentDetector (295 —Å—Ç—Ä–æ–∫) - –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ù–ê–ú–ï–†–ï–ù–ò–ô**

#### **–ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞**:
```python
# –î–µ—Ç–µ–∫—Ç–æ—Ä –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è TTS
detect_tts_intent(text, intent_keywords) -> bool

# –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–≥–µ–Ω—Ç–∞
extract_voice_settings(agent_config) -> Dict
should_auto_process_voice(voice_settings) -> bool
should_auto_tts_response(voice_settings, user_message) -> bool

# –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
get_primary_tts_provider(voice_settings) -> str
get_tts_config_for_provider(voice_settings, provider) -> Dict
```

#### **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**:
```python
DEFAULT_TTS_KEYWORDS = [
    "–æ—Ç–≤–µ—á–∞–π –≥–æ–ª–æ—Å–æ–º", "–æ—Ç–≤–µ—Ç—å –≥–æ–ª–æ—Å–æ–º", "—Å–∫–∞–∂–∏", 
    "–ø—Ä–æ–∏–∑–Ω–µ—Å–∏", "–æ–∑–≤—É—á—å", "—Ä–∞—Å—Å–∫–∞–∂–∏ –≥–æ–ª–æ—Å–æ–º", "–ø—Ä–æ—á–∏—Ç–∞–π –≤—Å–ª—É—Ö"
]
```

### **4. VoiceMetricsCollector (259 —Å—Ç—Ä–æ–∫) - –ú–û–ù–ò–¢–û–†–ò–ù–ì**

#### **–ú–µ—Ç—Ä–∏–∫–∏**:
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ STT/TTS
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –†–∞–∑–º–µ—Ä –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –î–Ω–µ–≤–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

#### **Redis keys**:
```python
voice_metrics:{agent_id}:{operation}  # Timeline metrics
voice_daily_stats:{agent_id}:{date}   # Daily aggregation
voice_provider_health:{provider}      # Provider status
```

### **5. RedisRateLimiter (203 —Å—Ç—Ä–æ–∫–∏) - –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï –ó–ê–ü–†–û–°–û–í**

#### **–ê–ª–≥–æ—Ä–∏—Ç–º**: Sliding Window
- –õ–∏–º–∏—Ç—ã per user/agent
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –æ–∫–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏
- Graceful handling –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üîÑ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–û–¢–û–ö–ò –î–ê–ù–ù–´–•**

### **1. STT Processing Flow**:
```
–ê—É–¥–∏–æ—Ñ–∞–π–ª ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí MinIO Upload ‚Üí Redis Cache Check ‚Üí 
Provider Selection ‚Üí STT Processing ‚Üí Cache Save ‚Üí 
Metrics Record ‚Üí Text Result
```

### **2. TTS Processing Flow**:
```
Intent Detection ‚Üí Provider Selection ‚Üí Text Validation ‚Üí 
Cache Check ‚Üí TTS Generation ‚Üí MinIO Upload ‚Üí 
Audio URL Return ‚Üí Metrics Record
```

### **3. Fallback Flow**:
```
Primary Provider Error ‚Üí Log Error ‚Üí Next Provider ‚Üí 
Retry Operation ‚Üí All Providers Failed ‚Üí Return Error
```

---

## üéØ **–ö–õ–Æ–ß–ï–í–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –î–õ–Ø VOICE_V2**

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Must Have)**:
1. **STT –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: OpenAI, Google, Yandex
2. **TTS –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: OpenAI, Google, Yandex  
3. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
4. **Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: STT/TTS —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. **MinIO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
6. **Rate limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
7. **–ú–µ—Ç—Ä–∏–∫–∏**: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
8. **Intent detection**: –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è TTS

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**:
- **Provider abstraction**: –ï–¥–∏–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- **Async operations**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- **Error resilience**: Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **Configuration driven**: –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∞–≥–µ–Ω—Ç–∞
- **Testable design**: 100% –ø–æ–∫—Ä—ã—Ç–∏–µ unit —Ç–µ—Å—Ç–∞–º–∏

### **Performance —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- **STT latency**: ‚â§5 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –¥–æ 60 —Å–µ–∫
- **TTS latency**: ‚â§3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ –¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤
- **Cache hit ratio**: ‚â•80% –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Provider availability**: ‚â•99.5% uptime
- **Concurrent users**: 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üß© **INTEGRATION POINTS**

### **1. LangGraph Integration**:
```python
# Current: voice_capabilities_tool
@tool
def voice_capabilities_tool() -> str:
    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö
    
# Voice_v2: –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–æ–≤—ã–π tool
@tool 
def voice_execution_tool(text: str, voice_config: Dict) -> str:
    # –ü—Ä—è–º–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ TTS —á–µ—Ä–µ–∑ orchestrator
```

### **2. Platform Integration**:
**Telegram Bot**:
- –ü–æ–ª—É—á–µ–Ω–∏–µ voice messages —á–µ—Ä–µ–∑ Bot API
- STT –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ orchestrator
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∞–≥–µ–Ω—Ç—É —á–µ—Ä–µ–∑ Redis
- TTS –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ audio file upload

**WhatsApp Bot**:
- –ü–æ–ª—É—á–µ–Ω–∏–µ voice messages —á–µ—Ä–µ–∑ wppconnect Socket.IO
- STT –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ orchestrator  
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∞–≥–µ–Ω—Ç—É —á–µ—Ä–µ–∑ Redis
- TTS –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ base64 audio

### **3. Agent Configuration**:
```json
{
  "config": {
    "simple": {
      "settings": {
        "voice_settings": {
          "enabled": true,
          "auto_stt": true,
          "auto_tts_on_keywords": true,
          "intent_keywords": ["–æ—Ç–≤–µ—á–∞–π –≥–æ–ª–æ—Å–æ–º", "—Å–∫–∞–∂–∏"],
          "providers": [
            {
              "provider": "openai",
              "priority": 1,
              "enabled": true,
              "stt_config": { "model": "whisper-1" },
              "tts_config": { "model": "tts-1", "voice": "alloy" }
            }
          ]
        }
      }
    }
  }
}
```

---

## üí° **OPTIMIZATION OPPORTUNITIES**

### **1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**:
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –£–ª—É—á—à–µ–Ω–∏–µ error handling —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Redis –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### **2. Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Connection pooling –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- Streaming TTS –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤

### **3. Code quality**:
- –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (‚â§500 —Å—Ç—Ä–æ–∫)
- –£–ª—É—á—à–µ–Ω–∏–µ test coverage (100%)
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

---

**üìù –†–µ–∑—É–ª—å—Ç–∞—Ç –§–∞–∑—ã 1.1.2**: ‚úÖ **–ó–ê–í–ï–†–®–ï–ù**
**üìÖ –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 27 –∏—é–ª—è 2025
**‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~1 —á–∞—Å
**üéØ –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: –§–∞–∑–∞ 1.1.3 - Performance benchmarking
