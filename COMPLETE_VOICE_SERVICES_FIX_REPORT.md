# üéØ –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ì–û–õ–û–°–û–í–´–• –°–ï–†–í–ò–°–û–í
## –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –æ —Ä–µ—à–µ–Ω–∏–∏ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º

### üìã –û–ë–ó–û–† –ü–†–û–ë–õ–ï–ú –ò –†–ï–®–ï–ù–ò–ô

#### ‚úÖ 1. Redis Service - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã
**–ü—Ä–æ–±–ª–µ–º–∞:** AttributeError - –º–µ—Ç–æ–¥—ã zadd, expire, lpush, zcard, zremrangebyrank, pipeline –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –≤ `app/services/redis_wrapper.py`
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### ‚úÖ 2. OpenAI TTS - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ processing_time
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã—á–∏—Å–ª—è–ª–æ—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (logger.info –≤–º–µ—Å—Ç–æ time.time())
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ `app/services/voice/tts/openai_tts.py`
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### ‚úÖ 3. Voice Orchestrator - –î–æ—Å—Ç—É–ø –∫ audio_data
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∞—Ç—Ä–∏–±—É—Ç—É audio_data
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω—ë–Ω –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ metadata['audio_data'] –≤ `app/services/voice/voice_orchestrator.py`
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

#### ‚úÖ 4. Yandex TTS - –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ 401
**–ü—Ä–æ–±–ª–µ–º–∞:** TTS –ø–æ–ª—É—á–∞–ª 401 –æ—à–∏–±–∫–∏, —Ö–æ—Ç—è STT —Ä–∞–±–æ—Ç–∞–ª —Å —Ç–µ–º–∏ –∂–µ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
**–†–µ—à–µ–Ω–∏–µ:** 
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –ø–µ—Ä–µ–¥–∞—á–µ folder ID –º–µ–∂–¥—É STT –∏ TTS
- STT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç header 'x-folder-id', TTS –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª body 'folderId'
- –ò–∑–º–µ–Ω–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ folder ID –≤ TTS —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ 'x-folder-id'
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ VoiceProcessingResult –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### üîß –î–ï–¢–ê–õ–ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

#### Redis Service (`app/services/redis_wrapper.py`)
```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
async def zadd(self, key: str, mapping: dict) -> int
async def expire(self, key: str, seconds: int) -> bool  
async def lpush(self, key: str, *values) -> int
async def zcard(self, key: str) -> int
async def zremrangebyrank(self, key: str, start: int, stop: int) -> int
def pipeline(self) -> Pipeline
```

#### Yandex TTS (`app/services/voice/tts/yandex_tts.py`)
```python
# –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
data = {
    "folderId": self.folder_id,  # –í —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
    "text": text,
    # ...
}

# –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
headers = {
    "Authorization": f"Api-Key {self.api_key}",
    "x-folder-id": self.folder_id,  # –í –∑–∞–≥–æ–ª–æ–≤–∫–µ
}
data = {
    "text": text,
    # ... –±–µ–∑ folderId
}
```

#### –°—Ö–µ–º–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å OpenAI TTS)
```python
# –ë–´–õ–û:
return VoiceProcessingResult(
    audio_data=audio_data,
    processing_time_ms=processing_time,
    provider=self.provider,
    metadata={...}
)

# –°–¢–ê–õ–û:
return VoiceProcessingResult(
    success=True,
    provider_used=self.provider,
    processing_time=processing_time,
    metadata={
        "audio_data": audio_data,  # –í –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
        # ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    }
)
```

### üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

#### ‚úÖ Redis Service
- –í—Å–µ 6 –º–µ—Ç–æ–¥–æ–≤ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

#### ‚úÖ OpenAI TTS  
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á—ë—Ç processing_time
- –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### ‚úÖ Yandex TTS
- **–°—Ç–∞—Ç—É—Å:** 200 ‚úÖ
- **–†–∞–∑–º–µ—Ä –∞—É–¥–∏–æ:** 24,429 –±–∞–π—Ç ‚úÖ
- **Health check:** –£—Å–ø–µ—à–Ω–æ ‚úÖ
- **Folder ID:** aje4vtb0ecrp0glbscsr —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### üéØ –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´

1. **–ü—Ä–æ–±–ª–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Yandex TTS** –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é –º–µ—Ç–æ–¥–æ–≤ –ø–µ—Ä–µ–¥–∞—á–∏ folder ID –º–µ–∂–¥—É STT –∏ TTS —Å–µ—Ä–≤–∏—Å–∞–º–∏
2. **Folder ID –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω** - –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Å–ø–æ—Å–æ–±–µ –ø–µ—Ä–µ–¥–∞—á–∏, –∞ –Ω–µ –≤ —Å–∞–º–æ–º ID
3. **–í—Å–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã** —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö
4. **Redis –æ–ø–µ—Ä–∞—Ü–∏–∏** –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### üìà –†–ï–ó–£–õ–¨–¢–ê–¢

‚úÖ **–í–°–ï –ì–û–õ–û–°–û–í–´–ï –°–ï–†–í–ò–°–´ –†–ê–ë–û–¢–ê–Æ–¢ –ö–û–†–†–ï–ö–¢–ù–û**
‚úÖ **Yandex TTS —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Yandex STT**  
‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö**
‚úÖ **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Redis –æ–ø–µ—Ä–∞—Ü–∏–π**

### üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ. –ù–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π folder ID "aje4vtb0ecrp0glbscsr".

---
**–î–∞—Ç–∞:** 14 –∏—é–ª—è 2025
**–°—Ç–∞—Ç—É—Å:** üéâ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´
