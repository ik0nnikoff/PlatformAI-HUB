{
  "session_id": "test_session_1752530343",
  "start_time": "2025-07-15T02:59:03.492924",
  "tests": {
    "workflow_automation": {
      "type": "workflow_automation",
      "status": "completed",
      "results": {
        "suite_start_time": 2116650.490569541,
        "tests": {
          "intent_detection": {
            "test": "voice_intent_detection",
            "status": "passed",
            "results": {
              "Отвечай голосом. Сколько времени сейчас?": true,
              "Скажи мне текущее время": true,
              "Произнеси ответ вслух": true,
              "Озвучь информацию о погоде": true,
              "Просто текстовый ответ": false,
              "Какая погода сегодня?": false,
              "Расскажи голосом о товарах": true
            }
          },
          "mock_interaction_1": {
            "test": "mock_agent_interaction",
            "status": "passed",
            "user_message": "Отвечай голосом. Сколько времени сейчас?",
            "agent_response": "Сейчас в Москве 00:47, 15 июля 2025 года.",
            "voice_intent_detected": true,
            "audio_generated": true,
            "audio_url": "http://localhost:9000/voice-files/test_audio_bdfe979c.mp3",
            "messages_sent": 1,
            "voice_messages_sent": 1
          },
          "mock_interaction_2": {
            "test": "mock_agent_interaction",
            "status": "passed",
            "user_message": "Скажи мне текущее время",
            "agent_response": "Сейчас в Москве 00:47, 15 июля 2025 года.",
            "voice_intent_detected": true,
            "audio_generated": true,
            "audio_url": "http://localhost:9000/voice-files/test_audio_0d3a16da.mp3",
            "messages_sent": 2,
            "voice_messages_sent": 2
          },
          "mock_interaction_3": {
            "test": "mock_agent_interaction",
            "status": "passed",
            "user_message": "Произнеси ответ вслух",
            "agent_response": "Сейчас в Москве 00:47, 15 июля 2025 года.",
            "voice_intent_detected": true,
            "audio_generated": true,
            "audio_url": "http://localhost:9000/voice-files/test_audio_c0e834ba.mp3",
            "messages_sent": 3,
            "voice_messages_sent": 3
          },
          "voice_orchestrator": {
            "test": "real_voice_orchestrator",
            "status": "passed",
            "health": {
              "orchestrator_initialized": true,
              "minio_health": true,
              "stt_services": {},
              "tts_services": {},
              "total_rate_limiters": 0
            },
            "orchestrator_initialized": true,
            "minio_health": true,
            "stt_services": {},
            "tts_services": {}
          },
          "configuration_loading": {
            "test": "agent_configuration_loading",
            "status": "passed",
            "agent_id": "agent_airsoft_0faa9616",
            "config_loaded": true,
            "voice_settings_present": true,
            "voice_settings": {
              "enabled": true,
              "intent_detection_mode": "keywords",
              "intent_keywords": [
                "голос",
                "скажи",
                "произнеси",
                "озвучь",
                "расскажи голосом",
                "ответь голосом",
                "прочитай вслух"
              ],
              "auto_stt": true,
              "auto_tts_on_keywords": true,
              "max_file_size_mb": 25,
              "cache_enabled": true,
              "cache_ttl_hours": 24,
              "rate_limit_per_minute": 15,
              "providers": [
                {
                  "provider": "yandex",
                  "priority": 1,
                  "fallback_enabled": true,
                  "stt_config": {
                    "enabled": true,
                    "model": "general",
                    "language": "ru-RU",
                    "max_duration": 60,
                    "sample_rate_hertz": 16000,
                    "enable_automatic_punctuation": true,
                    "enable_profanity_filter": false,
                    "custom_params": {
                      "sampleRateHertz": 16000,
                      "languageCode": "ru-RU",
                      "model": "general"
                    }
                  },
                  "tts_config": {
                    "enabled": true,
                    "model": "jane",
                    "language": "ru-RU",
                    "voice": "jane",
                    "speed": 1.0,
                    "pitch": 0.0,
                    "volume_gain_db": 0.0,
                    "audio_format": "mp3",
                    "sample_rate": 22050,
                    "custom_params": {
                      "speed": 1.0
                    }
                  },
                  "custom_settings": {
                    "description": "Основной провайдер для русскоязычных клиентов",
                    "priority_reason": "Лучшее качество для русского языка"
                  }
                },
                {
                  "provider": "openai",
                  "priority": 2,
                  "fallback_enabled": true,
                  "stt_config": {
                    "enabled": true,
                    "model": "whisper-1",
                    "language": "ru",
                    "max_duration": 60,
                    "enable_automatic_punctuation": true,
                    "custom_params": {
                      "model": "whisper-1",
                      "language": "ru"
                    }
                  },
                  "tts_config": {
                    "enabled": true,
                    "model": "tts-1",
                    "language": "ru",
                    "voice": "nova",
                    "speed": 1.0,
                    "audio_format": "mp3",
                    "sample_rate": 22050,
                    "custom_params": {
                      "model": "tts-1",
                      "voice": "nova",
                      "speed": 1.0
                    }
                  },
                  "custom_settings": {
                    "description": "Fallback провайдер с хорошей поддержкой многих языков",
                    "priority_reason": "Надежный резервный вариант"
                  }
                },
                {
                  "provider": "google",
                  "priority": 3,
                  "fallback_enabled": true,
                  "stt_config": {
                    "enabled": true,
                    "model": "latest_short",
                    "language": "ru-RU",
                    "max_duration": 60,
                    "sample_rate_hertz": 16000,
                    "enable_automatic_punctuation": true,
                    "custom_params": {
                      "model": "latest_short",
                      "languageCode": "ru-RU"
                    }
                  },
                  "tts_config": {
                    "enabled": true,
                    "model": "wavenet",
                    "language": "ru-RU",
                    "voice": "ru-RU-Wavenet-A",
                    "speed": 1.0,
                    "audio_format": "mp3",
                    "sample_rate": 22050,
                    "custom_params": {
                      "voiceName": "ru-RU-Wavenet-A",
                      "audioEncoding": "MP3"
                    }
                  },
                  "custom_settings": {
                    "description": "Дополнительный fallback провайдер",
                    "priority_reason": "Резервный вариант для особых случаев"
                  }
                }
              ]
            }
          }
        },
        "suite_end_time": 2116650.511029708,
        "total_duration": 0.020460166968405247,
        "summary": {
          "total_tests": 6,
          "passed_tests": 6,
          "failed_tests": 0,
          "success_rate": "100.0%",
          "mock_messages_sent": 3,
          "mock_voice_messages_sent": 3
        }
      }
    },
    "integration": {
      "type": "integration",
      "status": "completed",
      "results": {
        "start_time": "2025-07-15T02:59:07.092835",
        "agent_id": "agent_airsoft_0faa9616",
        "tests": {
          "health": {
            "test": "health_endpoints",
            "results": {
              "main_api": {
                "status": "unhealthy",
                "response_code": 404
              },
              "voice_service": {
                "status": "unhealthy",
                "response_code": 404
              },
              "redis_service": {
                "status": "unhealthy",
                "response_code": 404
              }
            },
            "overall_health": false
          },
          "configuration": {
            "test": "agent_configuration_api",
            "status": "passed",
            "agent_id": "agent_airsoft_0faa9616",
            "config_loaded": true,
            "has_voice_settings": true,
            "voice_settings": {
              "enabled": true,
              "intent_detection_mode": "keywords",
              "intent_keywords": [
                "голос",
                "скажи",
                "произнеси",
                "озвучь",
                "расскажи голосом",
                "ответь голосом",
                "прочитай вслух"
              ],
              "auto_stt": true,
              "auto_tts_on_keywords": true,
              "max_file_size_mb": 25,
              "cache_enabled": true,
              "cache_ttl_hours": 24,
              "rate_limit_per_minute": 15,
              "providers": [
                {
                  "provider": "yandex",
                  "priority": 1,
                  "fallback_enabled": true,
                  "stt_config": {
                    "enabled": true,
                    "model": "general",
                    "language": "ru-RU",
                    "max_duration": 60,
                    "sample_rate_hertz": 16000,
                    "enable_automatic_punctuation": true,
                    "enable_profanity_filter": false,
                    "custom_params": {
                      "sampleRateHertz": 16000,
                      "languageCode": "ru-RU",
                      "model": "general"
                    }
                  },
                  "tts_config": {
                    "enabled": true,
                    "model": "jane",
                    "language": "ru-RU",
                    "voice": "jane",
                    "speed": 1.0,
                    "pitch": 0.0,
                    "volume_gain_db": 0.0,
                    "audio_format": "mp3",
                    "sample_rate": 22050,
                    "custom_params": {
                      "speed": 1.0
                    }
                  },
                  "custom_settings": {
                    "description": "Основной провайдер для русскоязычных клиентов",
                    "priority_reason": "Лучшее качество для русского языка"
                  }
                },
                {
                  "provider": "openai",
                  "priority": 2,
                  "fallback_enabled": true,
                  "stt_config": {
                    "enabled": true,
                    "model": "whisper-1",
                    "language": "ru",
                    "max_duration": 60,
                    "enable_automatic_punctuation": true,
                    "custom_params": {
                      "model": "whisper-1",
                      "language": "ru"
                    }
                  },
                  "tts_config": {
                    "enabled": true,
                    "model": "tts-1",
                    "language": "ru",
                    "voice": "nova",
                    "speed": 1.0,
                    "audio_format": "mp3",
                    "sample_rate": 22050,
                    "custom_params": {
                      "model": "tts-1",
                      "voice": "nova",
                      "speed": 1.0
                    }
                  },
                  "custom_settings": {
                    "description": "Fallback провайдер с хорошей поддержкой многих языков",
                    "priority_reason": "Надежный резервный вариант"
                  }
                },
                {
                  "provider": "google",
                  "priority": 3,
                  "fallback_enabled": true,
                  "stt_config": {
                    "enabled": true,
                    "model": "latest_short",
                    "language": "ru-RU",
                    "max_duration": 60,
                    "sample_rate_hertz": 16000,
                    "enable_automatic_punctuation": true,
                    "custom_params": {
                      "model": "latest_short",
                      "languageCode": "ru-RU"
                    }
                  },
                  "tts_config": {
                    "enabled": true,
                    "model": "wavenet",
                    "language": "ru-RU",
                    "voice": "ru-RU-Wavenet-A",
                    "speed": 1.0,
                    "audio_format": "mp3",
                    "sample_rate": 22050,
                    "custom_params": {
                      "voiceName": "ru-RU-Wavenet-A",
                      "audioEncoding": "MP3"
                    }
                  },
                  "custom_settings": {
                    "description": "Дополнительный fallback провайдер",
                    "priority_reason": "Резервный вариант для особых случаев"
                  }
                }
              ]
            },
            "update_test": {
              "status": "failed",
              "error": "HTTP 405"
            }
          },
          "tts_synthesis": {
            "test": "voice_tts_synthesis",
            "status": "failed",
            "error": "HTTP 404: {\"detail\":\"Not Found\"}"
          },
          "voice_chat": {
            "test": "agent_voice_chat",
            "agent_id": "agent_airsoft_0faa9616",
            "total_tests": 3,
            "passed_tests": 0,
            "success_rate": 0.0,
            "detailed_results": [
              {
                "message": "Отвечай голосом. Расскажи о страйкболе кратко.",
                "status": "failed",
                "error": "HTTP 404"
              },
              {
                "message": "Что такое тактическая игра?",
                "status": "failed",
                "error": "HTTP 404"
              },
              {
                "message": "Скажи мне о правилах безопасности.",
                "status": "failed",
                "error": "HTTP 404"
              }
            ],
            "overall_status": "failed"
          },
          "redis": {
            "test": "redis_integration",
            "status": "failed",
            "error": "HTTP 404"
          }
        },
        "end_time": "2025-07-15T02:59:10.122872"
      }
    },
    "performance": {
      "type": "performance",
      "status": "completed",
      "results": {
        "start_time": 1752530352.144613,
        "agent_id": "agent_airsoft_0faa9616",
        "tests": {
          "stress_test": {
            "test_name": "concurrent_stress_test",
            "total_requests": 15,
            "successful_requests": 0,
            "failed_requests": 15,
            "avg_response_time": 0.0019065539042154949,
            "min_response_time": 0.0007390975952148438,
            "max_response_time": 0.004196882247924805,
            "p95_response_time": 0.004295206069946289,
            "throughput": 48.70256662734206,
            "error_rate": 100.0
          },
          "load_test": {
            "test_name": "sustained_load_test",
            "total_requests": 45,
            "successful_requests": 0,
            "failed_requests": 45,
            "avg_response_time": 0.0018303129408094618,
            "min_response_time": 0.0004820823669433594,
            "max_response_time": 0.0031290054321289062,
            "p95_response_time": 0.002299666404724121,
            "throughput": 1.4969386717912776,
            "error_rate": 100.0
          },
          "memory_test": {
            "test": "memory_leak_test",
            "iterations": 50,
            "successful_requests": 0,
            "success_rate": 0.0,
            "avg_response_time": 0,
            "response_time_trend": []
          }
        },
        "end_time": 1752530383.5491042,
        "total_duration": 31.404491186141968
      }
    }
  },
  "summary": {
    "total_test_types": 3,
    "completed_test_types": 3,
    "failed_test_types": 0,
    "overall_success": true,
    "detailed_stats": {
      "workflow": {
        "total_tests": 6,
        "passed_tests": 6,
        "success_rate": "100.0%"
      },
      "integration": {
        "total_tests": 5,
        "passed_tests": 1,
        "success_rate": "20.0%"
      },
      "performance": {
        "stress_test_completed": true,
        "load_test_completed": true,
        "memory_test_completed": true
      }
    }
  },
  "end_time": "2025-07-15T02:59:43.549930"
}